<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>26.异常 | Pybit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="异常">
<meta property="og:type" content="article">
<meta property="og:title" content="26.异常">
<meta property="og:url" content="http://yoursite.com/2018/12/09/面向对象/异常/index.html">
<meta property="og:site_name" content="Pybit">
<meta property="og:description" content="异常">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2018/12/09/面向对象/异常/1.png">
<meta property="og:image" content="http://yoursite.com/2018/12/09/面向对象/异常/2.png">
<meta property="og:updated_time" content="2018-12-09T07:53:36.409Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="26.异常">
<meta name="twitter:description" content="异常">
<meta name="twitter:image" content="http://yoursite.com/2018/12/09/面向对象/异常/1.png">
  
    <link rel="alternate" href="/atom.xml" title="Pybit" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Pybit</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">热爱Python的程序员</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-面向对象/异常" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/09/面向对象/异常/" class="article-date">
  <time datetime="2018-12-09T07:44:08.000Z" itemprop="datePublished">2018-12-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      26.异常
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>异常</p>
</blockquote>
<a id="more"></a>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>异常的概念</li>
<li>捕获异常</li>
<li>异常的传递</li>
<li>抛出异常</li>
</ul>
<h2 id="01-异常的概念"><a href="#01-异常的概念" class="headerlink" title="01. 异常的概念"></a>01. 异常的概念</h2><ul>
<li>程序在运行时，如果 <strong>Python 解释器</strong> <strong>遇到</strong> 到一个错误，<strong>会停止程序的执行，并且提示一些错误信息</strong>，这就是 <strong>异常</strong></li>
<li><strong>程序停止执行并且提示错误信息</strong> 这个动作，我们通常称之为：<strong>抛出(raise)异常</strong><br><img src="/2018/12/09/面向对象/异常/1.png" alt=""><br>程序开发时，很难将 <strong>所有的特殊情况</strong> 都处理的面面俱到，通过 <strong>异常捕获</strong> 可以针对突发事件做集中的处理，从而保证程序的 <strong>稳定性和健壮性</strong></li>
</ul>
<h2 id="2-捕获异常"><a href="#2-捕获异常" class="headerlink" title="2. 捕获异常"></a>2. 捕获异常</h2><h2 id="2-1-简单的捕获异常语法"><a href="#2-1-简单的捕获异常语法" class="headerlink" title="2.1 简单的捕获异常语法"></a>2.1 简单的捕获异常语法</h2><ul>
<li>在程序开发中，如果 <strong>对某些代码的执行不能确定是否正确</strong>，可以增加 <strong>try(尝试)</strong> 来 <strong>捕获异常</strong></li>
<li><p>捕获异常最简单的语法格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    尝试执行的代码</span><br><span class="line">except:</span><br><span class="line">    出现错误的处理</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>try</strong> <strong>尝试</strong>，下方编写要尝试代码，不确定是否能够正常执行的代码</p>
</li>
<li><strong>except</strong> <strong>如果不是</strong>，下方编写尝试失败的代码</li>
</ul>
<h2 id="简单异常捕获演练-——-要求用户输入整数"><a href="#简单异常捕获演练-——-要求用户输入整数" class="headerlink" title="简单异常捕获演练 —— 要求用户输入整数"></a>简单异常捕获演练 —— 要求用户输入整数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    # 提示用户输入一个数字</span><br><span class="line">    num = int(input(请输入数字：))</span><br><span class="line">except:</span><br><span class="line">    print(请输入正确的数字)</span><br></pre></td></tr></table></figure>
<h2 id="2-2-错误类型捕获"><a href="#2-2-错误类型捕获" class="headerlink" title="2.2 错误类型捕获"></a>2.2 错误类型捕获</h2><ul>
<li><strong>在程序执行时，可能会遇到 </strong>不同类型的异常<strong>，并且需要 </strong>针对不同类型的异常，做出不同的响应<strong>，这个时候，就需要捕获错误类型了</strong></li>
<li><strong>语法如下：</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    # 尝试执行的代码</span><br><span class="line">    pass</span><br><span class="line">except 错误类型1:</span><br><span class="line">    # 针对错误类型1，对应的代码处理</span><br><span class="line">    pass</span><br><span class="line">except (错误类型2, 错误类型3):</span><br><span class="line">    # 针对错误类型2 和 3，对应的代码处理</span><br><span class="line">    pass</span><br><span class="line">except Exception as result:</span><br><span class="line">    print(未知错误 %s % result)</span><br></pre></td></tr></table></figure>
<ul>
<li>当 <strong>Python</strong> 解释器 <strong>抛出异常</strong> 时，<strong>最后一行错误信息的第一个单词，就是错误类型</strong></li>
</ul>
<h2 id="异常类型捕获演练-——-要求用户输入整数"><a href="#异常类型捕获演练-——-要求用户输入整数" class="headerlink" title="异常类型捕获演练 —— 要求用户输入整数"></a>异常类型捕获演练 —— 要求用户输入整数</h2><p><strong>需求</strong></p>
<ul>
<li>提示用户输入一个整数</li>
<li>使用 <strong>8</strong> 除以用户输入的整数并且输出<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    num = int(input(请输入整数：))</span><br><span class="line">    result = 8 / num</span><br><span class="line">    print(result)</span><br><span class="line">except ValueError:</span><br><span class="line">    print(请输入正确的整数)</span><br><span class="line">except ZeroDivisionError:</span><br><span class="line">    print(除 0 错误)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="捕获未知错误"><a href="#捕获未知错误" class="headerlink" title="捕获未知错误"></a>捕获未知错误</h2><ul>
<li>在开发时，<strong>要预判到所有可能出现的错误</strong>，还是有一定难度的</li>
<li>如果希望程序 <strong>无论出现任何错误</strong>，都不会因为 <strong>Python</strong> 解释器 <strong>抛出异常而被终止</strong>，可以再增加一个 <strong>except</strong></li>
</ul>
<p><strong>语法如下：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">except Exception as result:</span><br><span class="line">    print(未知错误 %s % result)</span><br></pre></td></tr></table></figure>
<h2 id="2-3-异常捕获完整语法"><a href="#2-3-异常捕获完整语法" class="headerlink" title="2.3 异常捕获完整语法"></a>2.3 异常捕获完整语法</h2><ul>
<li>在实际开发中，为了能够处理复杂的异常情况，完整的异常语法如下：</li>
</ul>
<p><strong>提示：</strong></p>
<ul>
<li>有关完整语法的应用场景，在后续学习中，<strong>结合实际的案例</strong>会更好理解</li>
<li><p>现在先对这个语法结构有个印象即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    # 尝试执行的代码</span><br><span class="line">    pass</span><br><span class="line">except 错误类型1:</span><br><span class="line">    # 针对错误类型1，对应的代码处理</span><br><span class="line">    pass</span><br><span class="line">except 错误类型2:</span><br><span class="line">    # 针对错误类型2，对应的代码处理</span><br><span class="line">    pass</span><br><span class="line">except (错误类型3, 错误类型4):</span><br><span class="line">    # 针对错误类型3 和 4，对应的代码处理</span><br><span class="line">    pass</span><br><span class="line">except Exception as result:</span><br><span class="line">    # 打印错误信息</span><br><span class="line">    print(result)</span><br><span class="line">else:</span><br><span class="line">    # 没有异常才会执行的代码</span><br><span class="line">    pass</span><br><span class="line">finally:</span><br><span class="line">    # 无论是否有异常，都会执行的代码</span><br><span class="line">    print(无论是否有异常，都会执行的代码)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>else</strong> 只有在没有异常时才会执行的代码</p>
</li>
<li><strong>finally</strong> 无论是否有异常，都会执行的代码</li>
<li>之前一个演练的 <strong>完整捕获异常</strong> 的代码如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    num = int(input(请输入整数：))</span><br><span class="line">    result = 8 / num</span><br><span class="line">    print(result)</span><br><span class="line">except ValueError:</span><br><span class="line">    print(请输入正确的整数)</span><br><span class="line">except ZeroDivisionError:</span><br><span class="line">    print(除 0 错误)</span><br><span class="line">except Exception as result:</span><br><span class="line">    print(未知错误 %s % result)</span><br><span class="line">else:</span><br><span class="line">    print(正常执行)</span><br><span class="line">finally:</span><br><span class="line">    print(执行完成，但是不保证正确)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-异常的传递"><a href="#3-异常的传递" class="headerlink" title="3. 异常的传递"></a>3. 异常的传递</h2><ul>
<li><strong>异常的传递</strong> —— 当 <strong>函数/方法</strong> 执行 <strong>出现异常</strong>，会 <strong>将异常传递</strong> 给 函数/方法 的 <strong>调用一方</strong></li>
<li>如果 <strong>传递到主程序</strong>，仍然 <strong>没有异常处理</strong>，程序才会被终止</li>
</ul>
<p><strong>提示</strong></p>
<ul>
<li>在开发中，可以在主函数中增加 <strong>异常捕获</strong></li>
<li>而在主函数中调用的其他函数，只要出现异常，都会传递到主函数的 <strong>异常捕获</strong> 中</li>
<li>这样就不需要在代码中，增加大量的 <strong>异常捕获</strong>，能够保证代码的整洁</li>
</ul>
<p><strong>需求</strong></p>
<ul>
<li>定义函数 <strong>demo1()</strong> <strong>提示用户输入一个整数并且返回</strong></li>
<li>定义函数 <strong>demo2()</strong> 调用 <strong>demo1()</strong></li>
<li>在主程序中调用 <strong>demo2()</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def demo1():</span><br><span class="line">    return int(input(请输入一个整数：))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def demo2():</span><br><span class="line">    return demo1()</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    print(demo2())</span><br><span class="line">except ValueError:</span><br><span class="line">    print(请输入正确的整数)</span><br><span class="line">except Exception as result:</span><br><span class="line">    print(未知错误 %s % result)</span><br></pre></td></tr></table></figure>
<h2 id="4-抛出-raise-异常"><a href="#4-抛出-raise-异常" class="headerlink" title="4. 抛出 raise 异常"></a>4. 抛出 <strong>raise</strong> 异常</h2><h3 id="4-1-应用场景"><a href="#4-1-应用场景" class="headerlink" title="4.1 应用场景"></a>4.1 应用场景</h3><ul>
<li>在开发中，除了 <strong>代码执行出错</strong> <strong>Python</strong> 解释器会 <strong>抛出</strong> 异常之外</li>
<li>还可以根据 <strong>应用程序</strong> <strong>特有的业务需求</strong> <strong>主动抛出异常</strong></li>
</ul>
<p><strong>示例</strong></p>
<ul>
<li>提示用户 <strong>输入密码</strong>，如果 <strong>长度少于 8</strong>，抛出 <strong>异常</strong><br><img src="/2018/12/09/面向对象/异常/2.png" alt=""><br><strong>注意</strong></li>
</ul>
<ul>
<li>当前函数 <strong>只负责</strong> 提示用户输入密码，如果 <strong>密码长度不正确，需要其他的函数进行额外处理</strong></li>
<li>因此可以 <strong>抛出异常</strong>，由其他需要处理的函数 <strong>捕获异常</strong></li>
</ul>
<h3 id="4-2-抛出异常"><a href="#4-2-抛出异常" class="headerlink" title="4.2 抛出异常"></a>4.2 抛出异常</h3><ul>
<li><strong>Python</strong> 中提供了一个 <strong>Exception</strong> <strong>异常类</strong></li>
<li><p>在开发时，如果满足 <strong>特定业务需求时</strong>，希望 <strong>抛出异常</strong>，可以：</p>
</li>
<li><p><strong>创建</strong> 一个 <strong>Exception</strong> 的 <strong>对象</strong></p>
</li>
<li>使用 <strong>raise</strong> <strong>关键字</strong> 抛出 <strong>异常对象</strong></li>
</ul>
<p><strong>需求</strong></p>
<ul>
<li>定义 <strong>input_password</strong> 函数，提示用户输入密码</li>
<li>如果用户输入长度 &gt; 8，抛出异常</li>
<li>如果用户输入长度 &lt;=8，返回输入的密码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">def input_password():</span><br><span class="line"></span><br><span class="line">    # 1. 提示用户输入密码</span><br><span class="line">    pwd = input(请输入密码：)</span><br><span class="line"></span><br><span class="line">    # 2. 判断密码长度，如果长度 &lt;= 8，返回用户输入的密码</span><br><span class="line">    if len(pwd) &lt;= 8:</span><br><span class="line">        return pwd</span><br><span class="line"></span><br><span class="line">    # 3. 密码长度不够，需要抛出异常</span><br><span class="line">    # 1&lt; 创建异常对象 - 使用异常的错误信息字符串作为参数</span><br><span class="line">    ex = Exception(密码长度不够)</span><br><span class="line"></span><br><span class="line">    # 2&lt; 抛出异常对象</span><br><span class="line">    raise ex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    user_pwd = input_password()</span><br><span class="line">    print(user_pwd)</span><br><span class="line">except Exception as result:</span><br><span class="line">    print(发现错误：%s % result)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/09/面向对象/异常/" data-id="cjpgox704000v6gaeafk8t10s" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/12/09/面向对象/模块和包/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          27.模块和包
        
      </div>
    </a>
  
  
    <a href="/2018/12/09/面向对象/单例/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">25.单例</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/编程/">编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/集成开发环境/">集成开发环境</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pycharm/">Pycharm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/黑马Python基础班课件/">黑马Python基础班课件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/黑马Python面向对象/">黑马Python面向对象</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Pycharm/" style="font-size: 10px;">Pycharm</a> <a href="/tags/Python/" style="font-size: 13.33px;">Python</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/黑马Python基础班课件/" style="font-size: 20px;">黑马Python基础班课件</a> <a href="/tags/黑马Python面向对象/" style="font-size: 16.67px;">黑马Python面向对象</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/09/面向对象/eval函数/">29.eval函数</a>
          </li>
        
          <li>
            <a href="/2018/12/09/面向对象/文件/">28.文件</a>
          </li>
        
          <li>
            <a href="/2018/12/09/面向对象/模块和包/">27.模块和包</a>
          </li>
        
          <li>
            <a href="/2018/12/09/面向对象/异常/">26.异常</a>
          </li>
        
          <li>
            <a href="/2018/12/09/面向对象/单例/">25.单例</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Pybit<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    
<!--
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
-->
<script src="/js/jquery.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>




  </div>
</body>
</html>